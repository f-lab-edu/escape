#!/bin/bash

PORT=8080
DIR=/data/escape
JAR_NAME=${DIR}/*.jar

echo " ðŸ³   [$PORT] ë²ˆ í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì°¾ìŠµë‹ˆë‹¤...\n"

PID=$(lsof -i :$PORT -t)

if [ -z $PID ]; then
	echo " ðŸŽ‰   ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì—†ì–´ì„œ ê³§ë°”ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.\n"

else
	echo " âŒ   ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìžˆì–´ì„œ ì´ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤. [PID = $PID]\n"
	kill -15 $PID
fi

echo " ðŸ³   ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¸íŒ…í•©ë‹ˆë‹¤.\n"

echo " ðŸŽ‰   ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰í•©ë‹ˆë‹¤~ ðŸŽ‰\n"

nohup java -jar ${JAR_NAME} 1>> build.log 2>> build_error.log &
